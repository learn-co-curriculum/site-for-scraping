/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
!function(t,e){function n(e){t.extend(!0,Ce,e)}function i(n,i,u){function c(t){oe?g()&&(E(),T(t)):h()}function h(){se=i.theme?"ui":"fc",n.addClass("fc"),n.addClass(i.isRTL?"fc-rtl":"fc-ltr"),i.theme&&n.addClass("ui-widget"),oe=t("<div class='fc-content' style='position:relative'/>").prependTo(n),ne=new o(ee,i),ie=ne.render(),ie&&n.prepend(ie),y(i.defaultView),i.handleWindowResize&&t(window).resize(D),v()||p()}function p(){setTimeout(function(){!re.start&&v()&&C()},0)}function f(){re&&(te("viewDestroy",re,re,re.element),re.triggerEventDestroy()),t(window).unbind("resize",D),ne.destroy(),oe.remove(),n.removeClass("fc fc-rtl ui-widget")}function g(){return n.is(":visible")}function v(){return t("body").is(":visible")}function y(t){re&&t==re.name||x(t)}function x(e){fe++,re&&(te("viewDestroy",re,re,re.element),W(),re.triggerEventDestroy(),G(),re.element.remove(),ne.deactivateButton(re.name)),ne.activateButton(e),re=new Ee[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(oe),ee),C(),K(),fe--}function C(t){(!re.start||t||me<re.start||me>=re.end)&&g()&&T(t)}function T(t){fe++,re.start&&(te("viewDestroy",re,re,re.element),W(),A()),G(),re.render(me,t||0),k(),K(),(re.afterRender||R)(),O(),j(),te("viewRender",re,re,re.element),re.trigger("viewDisplay",de),fe--,M()}function S(){g()&&(W(),A(),E(),k(),L())}function E(){le=i.contentHeight?i.contentHeight:i.height?i.height-(ie?ie.height():0)-P(oe):Math.round(oe.width()/Math.max(i.aspectRatio,.5))}function k(){le===e&&E(),fe++,re.setHeight(le),re.setWidth(oe.width()),fe--,ae=n.outerWidth()}function D(){if(!fe)if(re.start){var t=++pe;setTimeout(function(){t==pe&&!fe&&g()&&ae!=(ae=n.outerWidth())&&(fe++,S(),re.trigger("windowResize",de),fe--)},200)}else p()}function H(){A(),z()}function I(t){A(),L(t)}function L(t){g()&&(re.setEventData(ge),re.renderEvents(ge,t),re.trigger("eventAfterAllRender"))}function A(){re.triggerEventDestroy(),re.clearEvents(),re.clearEventData()}function M(){!i.lazyFetching||ce(re.visStart,re.visEnd)?z():L()}function z(){he(re.visStart,re.visEnd)}function _(t){ge=t,L()}function N(t){I(t)}function O(){ne.updateTitle(re.title)}function j(){var t=new Date;t>=re.start&&t<re.end?ne.disableButton("today"):ne.enableButton("today")}function F(t,n,i){re.select(t,n,i===e?!0:i)}function W(){re&&re.unselect()}function B(){C(-1)}function q(){C(1)}function Q(){r(me,-1),C()}function Y(){r(me,1),C()}function X(){me=new Date,C()}function $(t,e,n){t instanceof Date?me=d(t):m(me,t,e,n),C()}function U(t,n,i){t!==e&&r(me,t),n!==e&&a(me,n),i!==e&&l(me,i),C()}function V(){return d(me)}function G(){oe.css({width:"100%",height:oe.height(),overflow:"hidden"})}function K(){oe.css({width:"",height:"",overflow:""})}function Z(){return re}function J(t,n){return n===e?i[t]:void(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(i[t]=n,S()))}function te(t,e){return i[t]?i[t].apply(e||de,Array.prototype.slice.call(arguments,2)):void 0}var ee=this;ee.options=i,ee.render=c,ee.destroy=f,ee.refetchEvents=H,ee.reportEvents=_,ee.reportEventChange=N,ee.rerenderEvents=I,ee.changeView=y,ee.select=F,ee.unselect=W,ee.prev=B,ee.next=q,ee.prevYear=Q,ee.nextYear=Y,ee.today=X,ee.gotoDate=$,ee.incrementDate=U,ee.formatDate=function(t,e){return b(t,e,i)},ee.formatDates=function(t,e,n){return w(t,e,n,i)},ee.getDate=V,ee.getView=Z,ee.option=J,ee.trigger=te,s.call(ee,i,u);var ne,ie,oe,se,re,ae,le,ue,ce=ee.isFetchNeeded,he=ee.fetchEvents,de=n[0],pe=0,fe=0,me=new Date,ge=[];m(me,i.year,i.month,i.date),i.droppable&&t(document).bind("dragstart",function(e,n){var o=e.target,s=t(o);if(!s.parents(".fc").length){var r=i.dropAccept;(t.isFunction(r)?r.call(o,s):s.is(r))&&(ue=o,re.dragStart(ue,e,n))}}).bind("dragstop",function(t,e){ue&&(re.dragStop(ue,t,e),ue=null)})}function o(e,n){function i(){d=n.theme?"ui":"fc";var e=n.header;return e?p=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(s("left")).append(s("center")).append(s("right"))):void 0}function o(){p.remove()}function s(i){var o=t("<td class='fc-header-"+i+"'/>"),s=n.header[i];return s&&t.each(s.split(" "),function(i){i>0&&o.append("<span class='fc-header-space'/>");var s;t.each(this.split(","),function(i,r){if("title"==r)o.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(d+"-corner-right"),s=null;else{var a;if(e[r]?a=e[r]:Ee[r]&&(a=function(){c.removeClass(d+"-state-hover"),e.changeView(r)}),a){var l=n.theme?j(n.buttonIcons,r):null,u=j(n.buttonText,r),c=t("<span class='fc-button fc-button-"+r+" "+d+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":u)+"</span>").click(function(){c.hasClass(d+"-state-disabled")||a()}).mousedown(function(){c.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){c.removeClass(d+"-state-down")}).hover(function(){c.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){c.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(o);W(c),s||c.addClass(d+"-corner-left"),s=c}}}),s&&s.addClass(d+"-corner-right")}),o}function r(t){p.find("h2").html(t)}function a(t){p.find("span.fc-button-"+t).addClass(d+"-state-active")}function l(t){p.find("span.fc-button-"+t).removeClass(d+"-state-active")}function u(t){p.find("span.fc-button-"+t).addClass(d+"-state-disabled")}function c(t){p.find("span.fc-button-"+t).removeClass(d+"-state-disabled")}var h=this;h.render=i,h.destroy=o,h.updateTitle=r,h.activateButton=a,h.deactivateButton=l,h.disableButton=u,h.enableButton=c;var d,p=t([])}function s(n,i){function o(t,e){return!S||S>t||e>E}function s(t,e){S=t,E=e,z=[];var n=++P,i=L.length;A=i;for(var o=0;i>o;o++)r(L[o],n)}function r(e,i){a(e,function(o){if(i==P){if(o){n.eventDataTransform&&(o=t.map(o,n.eventDataTransform)),e.eventDataTransform&&(o=t.map(o,e.eventDataTransform));for(var s=0;s<o.length;s++)o[s].source=e,b(o[s]);z=z.concat(o)}A--,A||H(z)}})}function a(e,i){var o,s,r=Se.sourceFetchers;for(o=0;o<r.length;o++){if(s=r[o](e,S,E,i),s===!0)return;if("object"==typeof s)return void a(s,i)}var l=e.events;if(l)t.isFunction(l)?(v(),l(d(S),d(E),function(t){i(t),y()})):t.isArray(l)?i(l):i();else{var u=e.url;if(u){var c,h=e.success,p=e.error,f=e.complete;c=t.isFunction(e.data)?e.data():e.data;var m=t.extend({},c||{}),g=Y(e.startParam,n.startParam),b=Y(e.endParam,n.endParam);g&&(m[g]=Math.round(+S/1e3)),b&&(m[b]=Math.round(+E/1e3)),v(),t.ajax(t.extend({},ke,e,{data:m,success:function(e){e=e||[];var n=Q(h,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){Q(p,this,arguments),i()},complete:function(){Q(f,this,arguments),y()}}))}else i()}}function l(t){t=u(t),t&&(A++,r(t,P))}function u(e){return t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e?(w(e),L.push(e),e):void 0}function c(e){L=t.grep(L,function(t){return!x(t,e)}),z=t.grep(z,function(t){return!x(t.source,e)}),H(z)}function h(t){var e,n,i=z.length,o=D().defaultEventEnd,s=t.start-t._start,r=t.end?t.end-(t._end||o(t)):0;for(e=0;i>e;e++)n=z[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+s),n.end=t.end?new Date(n.end?+n.end+r:+o(n)+r):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,b(n));b(t),H(z)}function p(t,e){b(t),t.source||(e&&(I.events.push(t),t.source=I),z.push(t)),H(z)}function f(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}z=t.grep(z,e,!0);for(var i=0;i<L.length;i++)t.isArray(L[i].events)&&(L[i].events=t.grep(L[i].events,e,!0))}else{z=[];for(var i=0;i<L.length;i++)t.isArray(L[i].events)&&(L[i].events=[])}H(z)}function m(e){return t.isFunction(e)?t.grep(z,e):e?(e+="",t.grep(z,function(t){return t._id==e})):z}function v(){M++||k("loading",null,!0,D())}function y(){--M||k("loading",null,!1,D())}function b(t){var i=t.source||{},o=Y(i.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+De++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=g(t.start,o)),t.end=g(t.end,o),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=Y(i.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function w(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Se.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function x(t,e){return t&&e&&C(t)==C(e)}function C(t){return("object"==typeof t?t.events||t.url:"")||t}var T=this;T.isFetchNeeded=o,T.fetchEvents=s,T.addEventSource=l,T.removeEventSource=c,T.updateEvent=h,T.renderEvent=p,T.removeEvents=f,T.clientEvents=m,T.normalizeEvent=b;for(var S,E,k=T.trigger,D=T.getView,H=T.reportEvents,I={events:[]},L=[I],P=0,A=0,M=0,z=[],R=0;R<i.length;R++)u(i[R])}function r(t,e,n){return t.setFullYear(t.getFullYear()+e),n||h(t),t}function a(t,e,n){if(+t){var i=t.getMonth()+e,o=d(t);for(o.setDate(1),o.setMonth(i),t.setMonth(i),n||h(t);t.getMonth()!=o.getMonth();)t.setDate(t.getDate()+(o>t?1:-1))}return t}function l(t,e,n){if(+t){var i=t.getDate()+e,o=d(t);o.setHours(9),o.setDate(i),t.setDate(i),n||h(t),u(t,o)}return t}function u(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Le)}function c(t,e){return t.setMinutes(t.getMinutes()+e),t}function h(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?h(new Date(+t)):new Date(+t)}function p(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function f(t,e){return Math.round((d(t,!0)-d(e,!0))/Ie)}function m(t,n,i,o){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),i!==e&&i!=t.getMonth()&&(t.setDate(1),t.setMonth(i)),o!==e&&t.setDate(o)}function g(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),v(t,n)||(t?new Date(t):null)):null}function v(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var i=new Date(n[1],0,1);if(e||!n[13]){var o=new Date(n[1],0,1,9,0);n[3]&&(i.setMonth(n[3]-1),o.setMonth(n[3]-1)),n[5]&&(i.setDate(n[5]),o.setDate(n[5])),u(i,o),n[7]&&i.setHours(n[7]),n[8]&&i.setMinutes(n[8]),n[10]&&i.setSeconds(n[10]),n[12]&&i.setMilliseconds(1e3*Number("0."+n[12])),u(i,o)}else if(i.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),i.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var s=60*Number(n[16])+(n[18]?Number(n[18]):0);s*="-"==n[15]?1:-1,i=new Date(+i+60*s*1e3)}return i}function y(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function b(t,e,n){return w(t,null,e,n)}function w(t,e,n,i){i=i||Ce;var o,s,r,a,l=t,u=e,c=n.length,h="";for(o=0;c>o;o++)if(s=n.charAt(o),"'"==s){for(r=o+1;c>r;r++)if("'"==n.charAt(r)){l&&(h+=r==o+1?"'":n.substring(o+1,r),o=r);break}}else if("("==s){for(r=o+1;c>r;r++)if(")"==n.charAt(r)){var d=b(l,n.substring(o+1,r),i);parseInt(d.replace(/\D/,""),10)&&(h+=d),o=r;break}}else if("["==s){for(r=o+1;c>r;r++)if("]"==n.charAt(r)){var p=n.substring(o+1,r),d=b(l,p,i);d!=b(u,p,i)&&(h+=d),o=r;break}}else if("{"==s)l=e,u=t;else if("}"==s)l=t,u=e;else{for(r=c;r>o;r--)if(a=Ae[n.substring(o,r)]){l&&(h+=a(l,i)),o=r-1;break}r==o&&l&&(h+=s)}return h}function x(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function C(t){return t.end?T(t.end,t.allDay):l(d(t.start),1)}function T(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):h(t)}function S(n,i,o){n.unbind("mouseover").mouseover(function(n){for(var s,r,a,l=n.target;l!=this;)s=l,l=l.parentNode;(r=s._fci)!==e&&(s._fci=e,a=i[r],o(a.event,a.element,a),t(n.target).trigger(n)),n.stopPropagation()})}function E(e,n,i){for(var o,s=0;s<e.length;s++)o=t(e[s]),o.width(Math.max(0,n-D(o,i)))}function k(e,n,i){for(var o,s=0;s<e.length;s++)o=t(e[s]),o.height(Math.max(0,n-P(o,i)))}function D(t,e){return H(t)+L(t)+(e?I(t):0)}function H(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function I(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function L(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function P(t,e){return A(t)+z(t)+(e?M(t):0)}function A(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function M(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function z(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function R(){}function _(t,e){return t-e}function N(t){return Math.max.apply(Math,t)}function O(t){return(10>t?"0":"")+t}function j(t,n){if(t[n]!==e)return t[n];for(var i,o=n.split(/(?=[A-Z])/),s=o.length-1;s>=0;s--)if(i=t[o[s].toLowerCase()],i!==e)return i;return t[""]}function F(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function W(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function B(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function q(t,e){var n=t.source||{},i=t.color,o=n.color,s=e("eventColor"),r=t.backgroundColor||i||n.backgroundColor||o||e("eventBackgroundColor")||s,a=t.borderColor||i||n.borderColor||o||e("eventBorderColor")||s,l=t.textColor||n.textColor||e("eventTextColor"),u=[];return r&&u.push("background-color:"+r),a&&u.push("border-color:"+a),l&&u.push("color:"+l),u.join(";")}function Q(e,n,i){if(t.isFunction(e)&&(e=[e]),e){var o,s;for(o=0;o<e.length;o++)s=e[o].apply(n,i)||s;return s}}function Y(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function X(t,e){function n(t,e){e&&(a(t,e),t.setDate(1));var n=o("firstDay"),h=d(t,!0);h.setDate(1);var p=a(d(h),1),m=d(h);l(m,-((m.getDay()-n+7)%7)),r(m);var g=d(p);l(g,(7-g.getDay()+n)%7),r(g,-1,!0);var v=u(),y=Math.round(f(g,m)/7);"fixed"==o("weekMode")&&(l(g,7*(6-y)),y=6),i.title=c(h,o("titleFormat")),i.start=h,i.end=p,i.visStart=m,i.visEnd=g,s(y,v,!0)}var i=this;i.render=n,V.call(i,t,e,"month");var o=i.opt,s=i.renderBasic,r=i.skipHiddenDays,u=i.getCellsPerWeek,c=e.formatDate}function $(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-o("firstDay")+7)%7)),c=l(d(n),7),h=d(n);r(h);var p=d(c);r(p,-1,!0);var f=a();i.start=n,i.end=c,i.visStart=h,i.visEnd=p,i.title=u(h,l(d(p),-1),o("titleFormat")),s(1,f,!1)}var i=this;i.render=n,V.call(i,t,e,"basicWeek");var o=i.opt,s=i.renderBasic,r=i.skipHiddenDays,a=i.getCellsPerWeek,u=e.formatDates}function U(t,e){function n(t,e){e&&l(t,e),r(t,0>e?-1:1);var n=d(t,!0),u=l(d(n),1);i.title=a(t,o("titleFormat")),i.start=i.visStart=n,i.end=i.visEnd=u,s(1,1,!1)}var i=this;i.render=n,V.call(i,t,e,"basicDay");var o=i.opt,s=i.renderBasic,r=i.skipHiddenDays,a=e.formatDate}function V(e,n,i){function o(t,e,n){ee=t,ne=e,ie=n,s(),q||r(),a()}function s(){le=fe("theme")?"ui":"fc",ue=fe("columnFormat"),ce=fe("weekNumbers"),de=fe("weekNumberTitle"),pe="iso"!=fe("weekNumberCalculation")?"w":"W"}function r(){V=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function a(){var n=u();N&&N.remove(),N=t(n).appendTo(e),O=N.find("thead"),j=O.find(".fc-day-header"),q=N.find("tbody"),Q=q.find("tr"),Y=q.find(".fc-day"),X=Q.find("td:first-child"),$=Q.eq(0).find(".fc-day > div"),U=Q.eq(0).find(".fc-day-content > div"),B(O.add(O.find("tr"))),B(Q),Q.eq(0).addClass("fc-first"),Q.filter(":last").addClass("fc-last"),Y.each(function(e,n){var i=Se(Math.floor(e/ne),e%ne);me("dayRender",_,i,t(n))}),y(Y)}function u(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+p()+"</table>";return t}function c(){var t,e,n=le+"-widget-header",i="";for(i+="<thead><tr>",ce&&(i+="<th class='fc-week-number "+n+"'>"+F(de)+"</th>"),t=0;ne>t;t++)e=Se(0,t),i+="<th class='fc-day-header fc-"+He[e.getDay()]+" "+n+"'>"+F(De(e,ue))+"</th>";return i+="</tr></thead>"}function p(){var t,e,n,i=le+"-widget-content",o="";for(o+="<tbody>",t=0;ee>t;t++){for(o+="<tr class='fc-week'>",ce&&(n=Se(t,0),o+="<td class='fc-week-number "+i+"'><div>"+F(De(n,pe))+"</div></td>"),e=0;ne>e;e++)n=Se(t,e),o+=f(n);o+="</tr>"}return o+="</tbody>"}function f(t){var e=le+"-widget-content",n=_.start.getMonth(),i=h(new Date),o="",s=["fc-day","fc-"+He[t.getDay()],e];return t.getMonth()!=n&&s.push("fc-other-month"),+t==+i?s.push("fc-today",le+"-state-highlight"):s.push(i>t?"fc-past":"fc-future"),o+="<td class='"+s.join(" ")+"' data-date='"+De(t,"yyyy-MM-dd")+"'><div>",ie&&(o+="<div class='fc-day-number'>"+t.getDate()+"</div>"),o+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function m(e){Z=e;var n,i,o,s=Z-O.height();"variable"==fe("weekMode")?n=i=Math.floor(s/(1==ee?2:6)):(n=Math.floor(s/ee),i=s-n*(ee-1)),X.each(function(e,s){ee>e&&(o=t(s),o.find("> div").css("min-height",(e==ee-1?i:n)-P(o)))})}function g(t){K=t,re.clear(),ae.clear(),te=0,ce&&(te=O.find("th.fc-week-number").outerWidth()),J=Math.floor((K-te)/ne),E(j.slice(0,-1),J)}function y(t){t.click(b).mousedown(Te)}function b(e){if(!fe("selectable")){var n=v(t(this).data("date"));me("dayClick",this,n,!0,e)}}function w(t,e,n){n&&oe.build();for(var i=ke(t,e),o=0;o<i.length;o++){var s=i[o];y(x(s.row,s.leftCol,s.row,s.rightCol))}}function x(t,n,i,o){var s=oe.rect(t,n,i,o,e);return we(s,e)}function C(t){return d(t)}function T(t,e){w(t,l(d(e),1),!0)}function S(){Ce()}function k(t,e,n){var i=Ee(t),o=Y[i.row*ne+i.col];me("dayClick",o,t,e,n)}function D(t,e){se.start(function(t){Ce(),t&&x(t.row,t.col,t.row,t.col)},e)}function H(t,e,n){var i=se.stop();if(Ce(),i){var o=Se(i);me("drop",t,o,!0,e,n)}}function I(t){return d(t.start)}function L(t){return re.left(t)}function A(t){return re.right(t)}function M(t){return ae.left(t)}function z(t){return ae.right(t)}function R(t){return Q.eq(t)}var _=this;_.renderBasic=o,_.setHeight=m,_.setWidth=g,_.renderDayOverlay=w,_.defaultSelectionEnd=C,_.renderSelection=T,_.clearSelection=S,_.reportDayClick=k,_.dragStart=D,_.dragStop=H,_.defaultEventEnd=I,_.getHoverListener=function(){return se},_.colLeft=L,_.colRight=A,_.colContentLeft=M,_.colContentRight=z,_.getIsCellAllDay=function(){return!0},_.allDayRow=R,_.getRowCnt=function(){return ee},_.getColCnt=function(){return ne},_.getColWidth=function(){return J},_.getDaySegmentContainer=function(){return V},he.call(_,e,n,i),ve.call(_),ge.call(_),G.call(_);var N,O,j,q,Q,Y,X,$,U,V,K,Z,J,te,ee,ne,ie,oe,se,re,ae,le,ue,ce,de,pe,fe=_.opt,me=_.trigger,we=_.renderOverlay,Ce=_.clearOverlays,Te=_.daySelectionMousedown,Se=_.cellToDate,Ee=_.dateToCell,ke=_.rangeToSegments,De=n.formatDate;W(e.addClass("fc-grid")),oe=new ye(function(e,n){var i,o,s;j.each(function(e,r){i=t(r),o=i.offset().left,e&&(s[1]=o),s=[o],n[e]=s}),s[1]=o+i.outerWidth(),Q.each(function(n,r){ee>n&&(i=t(r),o=i.offset().top,n&&(s[1]=o),s=[o],e[n]=s)}),s[1]=o+i.outerHeight()}),se=new be(oe),re=new xe(function(t){return $.eq(t)}),ae=new xe(function(t){return U.eq(t)})}function G(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,de.call(n)}function K(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-o("firstDay")+7)%7)),c=l(d(n),7),h=d(n);r(h);var p=d(c);r(p,-1,!0);var f=a();i.title=u(h,l(d(p),-1),o("titleFormat")),i.start=n,i.end=c,i.visStart=h,i.visEnd=p,s(f)}var i=this;i.render=n,J.call(i,t,e,"agendaWeek");var o=i.opt,s=i.renderAgenda,r=i.skipHiddenDays,a=i.getCellsPerWeek,u=e.formatDates}function Z(t,e){function n(t,e){e&&l(t,e),r(t,0>e?-1:1);var n=d(t,!0),u=l(d(n),1);i.title=a(t,o("titleFormat")),i.start=i.visStart=n,i.end=i.visEnd=u,s(1)}var i=this;i.render=n,J.call(i,t,e,"agendaDay");var o=i.opt,s=i.renderAgenda,r=i.skipHiddenDays,a=e.formatDate}function J(n,i,o){function s(t){ze=t,r(),J?u():a()}function r(){Fe=Ue("theme")?"ui":"fc",We=Ue("isRTL"),Be=y(Ue("minTime")),qe=y(Ue("maxTime")),Qe=Ue("columnFormat"),Ye=Ue("weekNumbers"),Xe=Ue("weekNumberTitle"),$e="iso"!=Ue("weekNumberCalculation")?"w":"W",Pe=Ue("snapMinutes")||Ue("slotMinutes")}function a(){var e,i,o,s,r,a=Fe+"-widget-header",l=Fe+"-widget-content",h=Ue("slotMinutes")%15==0;for(u(),ue=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ue("allDaySlot")?(ce=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ue),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+a+" fc-agenda-axis'>"+Ue("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+a+" fc-agenda-gutter'>&nbsp;</th></tr></table>",de=t(e).appendTo(ue),pe=de.find("tr"),C(pe.find("td")),ue.append("<div class='fc-agenda-divider "+a+"'><div class='fc-agenda-divider-inner'/></div>")):ce=t([]),fe=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ue),me=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(fe),we=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(me),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",i=p(),s=c(d(i),qe),c(i,Be),Re=0,o=0;s>i;o++)r=i.getMinutes(),e+="<tr class='fc-slot"+o+" "+(r?"fc-minor":"")+"'><th class='fc-agenda-axis "+a+"'>"+(h&&r?"&nbsp;":rn(i,Ue("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'>&nbsp;</div></td></tr>",c(i,Ue("slotMinutes")),Re++;e+="</tbody></table>",Ce=t(e).appendTo(me),T(Ce.find("td"))}function u(){var e=f();J&&J.remove(),J=t(e).appendTo(n),ee=J.find("thead"),ne=ee.find("th").slice(1,-1),ie=J.find("tbody"),oe=ie.find("td").slice(0,-1),se=oe.find("> div"),re=oe.find(".fc-day-content > div"),ae=oe.eq(0),le=se.eq(0),B(ee.add(ee.find("tr"))),B(ie.add(ie.find("tr")))}function f(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+m()+g()+"</table>";return t}function m(){var t,e,n,i=Fe+"-widget-header",o="";for(o+="<thead><tr>",Ye?(t=nn(0,0),e=rn(t,$e),We?e+=Xe:e=Xe+e,o+="<th class='fc-agenda-axis fc-week-number "+i+"'>"+F(e)+"</th>"):o+="<th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n=0;ze>n;n++)t=nn(0,n),o+="<th class='fc-"+He[t.getDay()]+" fc-col"+n+" "+i+"'>"+F(rn(t,Qe))+"</th>";return o+="<th class='fc-agenda-gutter "+i+"'>&nbsp;</th></tr></thead>"}function g(){var t,e,n,i,o,s=Fe+"-widget-header",r=Fe+"-widget-content",a=h(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",n="",e=0;ze>e;e++)t=nn(0,e),o=["fc-col"+e,"fc-"+He[t.getDay()],r],+t==+a?o.push(Fe+"-state-highlight","fc-today"):o.push(a>t?"fc-past":"fc-future"),i="<td class='"+o.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=i;return l+=n,l+="<td class='fc-agenda-gutter "+r+"'>&nbsp;</td></tr></tbody>"}function v(t){t===e&&(t=Ee),Ee=t,an={};var n=ie.position().top,i=fe.position().top,o=Math.min(t-n,Ce.height()+i+1);le.height(o-P(ae)),ue.css("top",n),fe.height(o-i-1),Le=Ce.find("tr:first").height()+1,Ae=Ue("slotMinutes")/Pe,Me=Le/Ae}function b(e){Se=e,Oe.clear(),je.clear();var n=ee.find("th:first");de&&(n=n.add(de.find("th:first"))),n=n.add(Ce.find("th:first")),ke=0,E(n.width("").each(function(e,n){ke=Math.max(ke,t(n).outerWidth())}),ke);var i=J.find(".fc-agenda-gutter");de&&(i=i.add(de.find("th.fc-agenda-gutter")));var o=fe[0].clientWidth;Ie=fe.width()-o,Ie?(E(i,Ie),i.show().prev().removeClass("fc-last")):i.hide().prev().addClass("fc-last"),De=Math.floor((o-ke)/ze),E(ne.slice(0,-1),De)}function w(){function t(){fe.scrollTop(i)}var e=p(),n=d(e);n.setHours(Ue("firstHour"));var i=O(e,n)+1;t(),setTimeout(t,0)}function x(){w()}function C(t){t.click(S).mousedown(tn)}function T(t){t.click(S).mousedown(U)}function S(t){if(!Ue("selectable")){var e=Math.min(ze-1,Math.floor((t.pageX-J.offset().left-ke)/De)),n=nn(0,e),i=this.parentNode.className.match(/fc-slot(\d+)/);if(i){var o=parseInt(i[1])*Ue("slotMinutes"),s=Math.floor(o/60);n.setHours(s),n.setMinutes(o%60+Be),Ve("dayClick",oe[e],n,!1,t)}else Ve("dayClick",oe[e],n,!0,t)}}function D(t,e,n){n&&_e.build();for(var i=sn(t,e),o=0;o<i.length;o++){var s=i[o];C(H(s.row,s.leftCol,s.row,s.rightCol))}}function H(t,e,n,i){var o=_e.rect(t,e,n,i,ue);return Ge(o,ue)}function I(t,e){for(var n=0;ze>n;n++){var i=nn(0,n),o=l(d(i),1),s=new Date(Math.max(i,t)),r=new Date(Math.min(o,e));if(r>s){var a=_e.rect(0,n,0,n,me),u=O(i,s),c=O(i,r);a.top=u,a.height=c-u,T(Ge(a,me))}}}function L(t){return Oe.left(t)}function A(t){return je.left(t)}function M(t){return Oe.right(t)}function z(t){return je.right(t)}function R(t){return Ue("allDaySlot")&&!t.row}function N(t){var e=nn(0,t.col),n=t.row;return Ue("allDaySlot")&&n--,n>=0&&c(e,Be+n*Pe),e}function O(t,n){if(t=d(t,!0),n<c(d(t),Be))return 0;if(n>=c(d(t),qe))return Ce.height();var i=Ue("slotMinutes"),o=60*n.getHours()+n.getMinutes()-Be,s=Math.floor(o/i),r=an[s];return r===e&&(r=an[s]=Ce.find("tr").eq(s).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+Le*(o%i/i)))}function j(){return pe}function q(t){var e=d(t.start);return t.allDay?e:c(e,Ue("defaultEventMinutes"))}function Q(t,e){return e?d(t):c(d(t),Ue("slotMinutes"))}function Y(t,e,n){n?Ue("allDaySlot")&&D(t,l(d(e),1),!0):X(t,e)}function X(e,n){var i=Ue("selectHelper");if(_e.build(),i){var o=on(e).col;if(o>=0&&ze>o){var s=_e.rect(0,o,0,o,me),r=O(e,e),a=O(e,n);if(a>r){if(s.top=r,s.height=a-r,s.left+=2,s.width-=5,t.isFunction(i)){var l=i(e,n);l&&(s.position="absolute",Te=t(l).css(s).appendTo(me))}else s.isStart=!0,s.isEnd=!0,Te=t(en({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},s)),Te.css("opacity",Ue("dragOpacity"));Te&&(T(Te),me.append(Te),E(Te,s.width,!0),k(Te,s.height,!0))}}}else I(e,n)}function $(){Ke(),Te&&(Te.remove(),Te=null)}function U(e){if(1==e.which&&Ue("selectable")){Je(e);var n;Ne.start(function(t,e){if($(),t&&t.col==e.col&&!R(t)){var i=N(e),o=N(t);n=[i,c(d(i),Pe),o,c(d(o),Pe)].sort(_),X(n[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){Ne.stop(),n&&(+n[0]==+n[1]&&V(n[0],!1,t),Ze(n[0],n[3],!1,t))})}}function V(t,e,n){Ve("dayClick",oe[on(t).col],t,e,n)}function G(t,e){Ne.start(function(t){if(Ke(),t)if(R(t))H(t.row,t.col,t.row,t.col);else{var e=N(t),n=c(d(e),Ue("defaultEventMinutes"));I(e,n)}},e)}function K(t,e,n){var i=Ne.stop();Ke(),i&&Ve("drop",t,N(i),R(i),e,n)}var Z=this;Z.renderAgenda=s,Z.setWidth=b,Z.setHeight=v,Z.afterRender=x,Z.defaultEventEnd=q,Z.timePosition=O,Z.getIsCellAllDay=R,Z.allDayRow=j,Z.getCoordinateGrid=function(){return _e},Z.getHoverListener=function(){return Ne},Z.colLeft=L,Z.colRight=M,Z.colContentLeft=A,Z.colContentRight=z,Z.getDaySegmentContainer=function(){return ce},Z.getSlotSegmentContainer=function(){return we},Z.getMinMinute=function(){return Be},Z.getMaxMinute=function(){return qe},Z.getSlotContainer=function(){return me},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return ze},Z.getColWidth=function(){return De},Z.getSnapHeight=function(){return Me},Z.getSnapMinutes=function(){return Pe},Z.defaultSelectionEnd=Q,Z.renderDayOverlay=D,Z.renderSelection=Y,Z.clearSelection=$,Z.reportDayClick=V,Z.dragStart=G,Z.dragStop=K,he.call(Z,n,i,o),ve.call(Z),ge.call(Z),te.call(Z);var J,ee,ne,ie,oe,se,re,ae,le,ue,ce,de,pe,fe,me,we,Ce,Te,Se,Ee,ke,De,Ie,Le,Pe,Ae,Me,ze,Re,_e,Ne,Oe,je,Fe,We,Be,qe,Qe,Ye,Xe,$e,Ue=Z.opt,Ve=Z.trigger,Ge=Z.renderOverlay,Ke=Z.clearOverlays,Ze=Z.reportSelection,Je=Z.unselect,tn=Z.daySelectionMousedown,en=Z.slotSegHtml,nn=Z.cellToDate,on=Z.dateToCell,sn=Z.rangeToSegments,rn=i.formatDate,an={};W(n.addClass("fc-agenda")),_e=new ye(function(e,n){function i(t){return Math.max(l,Math.min(u,t))}var o,s,r;ne.each(function(e,i){o=t(i),s=o.offset().left,e&&(r[1]=s),r=[s],n[e]=r}),r[1]=s+o.outerWidth(),Ue("allDaySlot")&&(o=pe,s=o.offset().top,e[0]=[s,s+o.outerHeight()]);for(var a=me.offset().top,l=fe.offset().top,u=l+fe.outerHeight(),c=0;Re*Ae>c;c++)e.push([i(a+Me*c),i(a+Me*(c+1))])}),Ne=new be(_e),Oe=new xe(function(t){return se.eq(t)}),je=new xe(function(t){return re.eq(t)})}function te(){function n(t,e){var n,i=t.length,s=[],r=[];for(n=0;i>n;n++)t[n].allDay?s.push(t[n]):r.push(t[n]);y("allDaySlot")&&(te(s,e),H()),a(o(r),e)}function i(){I().empty(),L().empty()}function o(e){var n,i,o,a,l,u=W(),h=z(),p=M(),f=t.map(e,r),m=[];for(i=0;u>i;i++)for(n=j(0,i),c(n,h),l=s(e,f,n,c(d(n),p-h)),l=ee(l),o=0;o<l.length;o++)a=l[o],a.col=i,m.push(a);return m}function s(t,e,n,i){var o,s,r,a,l,u,c,h,p=[],f=t.length;for(o=0;f>o;o++)s=t[o],r=s.start,a=e[o],a>n&&i>r&&(n>r?(l=d(n),c=!1):(l=r,c=!0),a>i?(u=d(i),h=!1):(u=a,h=!0),p.push({event:s,start:l,end:u,isStart:c,isEnd:h}));return p.sort(ce)}function r(t){return t.end?d(t.end):c(d(t.start),y("defaultEventMinutes"))}function a(n,i){var o,s,r,a,l,c,d,p,f,m,g,v,w,x,C,T,E=n.length,k="",H=L(),I=y("isRTL");for(o=0;E>o;o++)s=n[o],r=s.event,a=R(s.start,s.start),l=R(s.start,s.end),c=N(s.col),d=O(s.col),p=d-c,d-=.025*p,p=d-c,f=p*(s.forwardCoord-s.backwardCoord),y("slotEventOverlap")&&(f=Math.max(2*(f-10),f)),I?(g=d-s.backwardCoord*p,m=g-f):(m=c+s.backwardCoord*p,g=m+f),m=Math.max(m,c),g=Math.min(g,d),f=g-m,s.top=a,s.left=m,s.outerWidth=f,s.outerHeight=l-a,k+=u(r,s);for(H[0].innerHTML=k,v=H.children(),o=0;E>o;o++)s=n[o],r=s.event,w=t(v[o]),x=b("eventRender",r,r,w),x===!1?w.remove():(x&&x!==!0&&(w.remove(),w=t(x).css({position:"absolute",top:s.top,left:s.left}).appendTo(H)),s.element=w,r._id===i?h(r,w,s):w[0]._fci=o,$(r,w));for(S(H,n,h),o=0;E>o;o++)s=n[o],(w=s.element)&&(s.vsides=P(w,!0),s.hsides=D(w,!0),C=w.find(".fc-event-title"),C.length&&(s.contentTop=C[0].offsetTop));for(o=0;E>o;o++)s=n[o],(w=s.element)&&(w[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",T=Math.max(0,s.outerHeight-s.vsides),w[0].style.height=T+"px",r=s.event,s.contentTop!==e&&T-s.contentTop<10&&(w.find("div.fc-event-time").text(ie(r.start,y("timeFormat"))+" - "+r.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",r,r,w))}function u(t,e){var n="<",i=t.url,o=q(t,y),s=["fc-event","fc-event-vert"];return w(t)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(t.className),t.source&&(s=s.concat(t.source.className||[])),n+=i?"a href='"+F(t.url)+"'":"div",n+=" class='"+s.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+o+"'><div class='fc-event-inner'><div class='fc-event-time'>"+F(oe(t.start,t.end,y("timeFormat")))+"</div><div class='fc-event-title'>"+F(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&x(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(i?"a":"div")+">"}function h(t,e,n){var i=e.find("div.fc-event-time");w(t)&&m(t,e,i),n.isEnd&&x(t)&&g(t,e,i),E(t,e)}function p(t,e,n){function i(){u||(e.width(o).height("").draggable("option","grid",null),u=!0)}var o,s,r,a=n.isStart,u=!0,c=A(),h=B(),p=Q(),m=Y(),g=z();e.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,g){b("eventDragStart",e,t,n,g),V(t,e),o=e.width(),c.start(function(n,o){if(J(),n){s=!1;var c=j(0,o.col),g=j(0,n.col);r=f(g,c),n.row?a?u&&(e.width(h-10),k(e,p*Math.round((t.end?(t.end-t.start)/Pe:y("defaultEventMinutes"))/m)),e.draggable("option","grid",[h,1]),u=!1):s=!0:(Z(l(d(t.start),r),l(C(t),r)),i()),s=s||u&&!r}else i(),s=!0;e.draggable("option","revert",s)},n,"drag")},stop:function(n,o){if(c.stop(),J(),b("eventDragStop",e,t,n,o),s)i(),e.css("filter",""),U(t,e);else{var a=0;u||(a=Math.round((e.offset().top-X().offset().top)/p)*m+g-(60*t.start.getHours()+t.start.getMinutes())),G(this,t,r,a,u,n,o)}}})}function m(t,e,n){function i(){J(),a&&(h?(n.hide(),e.draggable("option","grid",null),Z(l(d(t.start),w),l(C(t),w))):(o(x),n.css("display",""),e.draggable("option","grid",[k,D])))}function o(e){var i,o=c(d(t.start),e);t.end&&(i=c(d(t.end),e)),n.text(oe(o,i,y("timeFormat")))}var s,r,a,u,h,p,m,g,w,x,T,S=v.getCoordinateGrid(),E=W(),k=B(),D=Q(),H=Y();e.draggable({scroll:!1,grid:[k,D],axis:1==E?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,i){b("eventDragStart",e,t,n,i),V(t,e),S.build(),s=e.position(),r=S.cell(n.pageX,n.pageY),a=u=!0,h=p=_(r),m=g=0,w=0,x=T=0
},drag:function(t,n){var o=S.cell(t.pageX,t.pageY);if(a=!!o){if(h=_(o),m=Math.round((n.position.left-s.left)/k),m!=g){var l=j(0,r.col),c=r.col+m;c=Math.max(0,c),c=Math.min(E-1,c);var d=j(0,c);w=f(d,l)}h||(x=Math.round((n.position.top-s.top)/D)*H)}(a!=u||h!=p||m!=g||x!=T)&&(i(),u=a,p=h,g=m,T=x),e.draggable("option","revert",!a)},stop:function(n,o){J(),b("eventDragStop",e,t,n,o),a&&(h||w||x)?G(this,t,w,h?0:x,h,n,o):(a=!0,h=!1,m=0,w=0,x=0,i(),e.css("filter",""),e.css(s),U(t,e))}})}function g(t,e,n){var i,o,s=Q(),r=Y();e.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(n,s){i=o=0,V(t,e),b("eventResizeStart",this,t,n,s)},resize:function(a,l){i=Math.round((Math.max(s,e.height())-l.originalSize.height)/s),i!=o&&(n.text(oe(t.start,i||t.end?c(T(t),r*i):null,y("timeFormat"))),o=i)},stop:function(n,o){b("eventResizeStop",this,t,n,o),i?K(this,t,0,r*i,n,o):U(t,e)}})}var v=this;v.renderEvents=n,v.clearEvents=i,v.slotSegHtml=u,de.call(v);var y=v.opt,b=v.trigger,w=v.isEventDraggable,x=v.isEventResizable,T=v.eventEnd,E=v.eventElementHandlers,H=v.setHeight,I=v.getDaySegmentContainer,L=v.getSlotSegmentContainer,A=v.getHoverListener,M=v.getMaxMinute,z=v.getMinMinute,R=v.timePosition,_=v.getIsCellAllDay,N=v.colContentLeft,O=v.colContentRight,j=v.cellToDate,W=v.getColCnt,B=v.getColWidth,Q=v.getSnapHeight,Y=v.getSnapMinutes,X=v.getSlotContainer,$=v.reportEventElement,U=v.showEvents,V=v.hideEvents,G=v.eventDrop,K=v.eventResize,Z=v.renderDayOverlay,J=v.clearOverlays,te=v.renderDayEvents,ne=v.calendar,ie=ne.formatDate,oe=ne.formatDates;v.draggableDayEvent=p}function ee(t){var e,n=ne(t),i=n[0];if(ie(n),i){for(e=0;e<i.length;e++)oe(i[e]);for(e=0;e<i.length;e++)se(i[e],0,0)}return re(n)}function ne(t){var e,n,i,o=[];for(e=0;e<t.length;e++){for(n=t[e],i=0;i<o.length&&ae(n,o[i]).length;i++);(o[i]||(o[i]=[])).push(n)}return o}function ie(t){var e,n,i,o,s;for(e=0;e<t.length;e++)for(n=t[e],i=0;i<n.length;i++)for(o=n[i],o.forwardSegs=[],s=e+1;s<t.length;s++)ae(o,t[s],o.forwardSegs)}function oe(t){var n,i,o=t.forwardSegs,s=0;if(t.forwardPressure===e){for(n=0;n<o.length;n++)i=o[n],oe(i),s=Math.max(s,1+i.forwardPressure);t.forwardPressure=s}}function se(t,n,i){var o,s=t.forwardSegs;if(t.forwardCoord===e)for(s.length?(s.sort(ue),se(s[0],n+1,i),t.forwardCoord=s[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(n+1),o=0;o<s.length;o++)se(s[o],0,t.forwardCoord)}function re(t){var e,n,i,o=[];for(e=0;e<t.length;e++)for(n=t[e],i=0;i<n.length;i++)o.push(n[i]);return o}function ae(t,e,n){n=n||[];for(var i=0;i<e.length;i++)le(t,e[i])&&n.push(e[i]);return n}function le(t,e){return t.end>e.start&&t.start<e.end}function ue(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ce(t,e)}function ce(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function he(n,i,o){function s(e,n){var i=$[e];return t.isPlainObject(i)?j(i,n||o):i}function r(t,e){return i.trigger.apply(i,[t,e||O].concat(Array.prototype.slice.call(arguments,2),[O]))}function a(t){var e=t.source||{};return Y(t.startEditable,e.startEditable,s("eventStartEditable"),t.editable,e.editable,s("editable"))&&!s("disableDragging")}function u(t){var e=t.source||{};return Y(t.durationEditable,e.durationEditable,s("eventDurationEditable"),t.editable,e.editable,s("editable"))&&!s("disableResizing")}function h(t){q={};var e,n,i=t.length;for(e=0;i>e;e++)n=t[e],q[n._id]?q[n._id].push(n):q[n._id]=[n]}function p(){q={},Q={},X=[]}function m(t){return t.end?d(t.end):F(t)}function g(t,e){X.push({event:t,element:e}),Q[t._id]?Q[t._id].push(e):Q[t._id]=[e]}function v(){t.each(X,function(t,e){O.trigger("eventDestroy",e.event,e.event,e.element)})}function y(t,e){e.click(function(n){return e.hasClass("ui-draggable-dragging")||e.hasClass("ui-resizable-resizing")?void 0:r("eventClick",this,t,n)}).hover(function(e){r("eventMouseover",this,t,e)},function(e){r("eventMouseout",this,t,e)})}function b(t,e){x(t,e,"show")}function w(t,e){x(t,e,"hide")}function x(t,e,n){var i,o=Q[t._id],s=o.length;for(i=0;s>i;i++)e&&o[i][0]==e[0]||o[i][n]()}function C(t,e,n,i,o,s,a){var l=e.allDay,u=e._id;S(q[u],n,i,o),r("eventDrop",t,e,n,i,o,function(){S(q[u],-n,-i,l),B(u)},s,a),B(u)}function T(t,e,n,i,o,s){var a=e._id;E(q[a],n,i),r("eventResize",t,e,n,i,function(){E(q[a],-n,-i),B(a)},o,s),B(a)}function S(t,n,i,o){i=i||0;for(var s,r=t.length,a=0;r>a;a++)s=t[a],o!==e&&(s.allDay=o),c(l(s.start,n,!0),i),s.end&&(s.end=c(l(s.end,n,!0),i)),W(s,$)}function E(t,e,n){n=n||0;for(var i,o=t.length,s=0;o>s;s++)i=t[s],i.end=c(l(m(i),e,!0),n),W(i,$)}function k(t){return"object"==typeof t&&(t=t.getDay()),G[t]}function D(){return U}function H(t,e,n){for(e=e||1;G[(t.getDay()+(n?e:0)+7)%7];)l(t,e)}function I(){var t=L.apply(null,arguments),e=P(t),n=A(e);return n}function L(t,e){var n=O.getColCnt(),i=J?-1:1,o=J?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var s=t*n+(e*i+o);return s}function P(t){var e=O.visStart.getDay();return t+=K[e],7*Math.floor(t/U)+Z[(t%U+U)%U]-e}function A(t){var e=d(O.visStart);return l(e,t),e}function M(t){var e=z(t),n=R(e),i=_(n);return i}function z(t){return f(t,O.visStart)}function R(t){var e=O.visStart.getDay();return t+=e,Math.floor(t/7)*U+K[(t%7+7)%7]-K[e]}function _(t){var e=O.getColCnt(),n=J?-1:1,i=J?e-1:0,o=Math.floor(t/e),s=(t%e+e)%e*n+i;return{row:o,col:s}}function N(t,e){for(var n=O.getRowCnt(),i=O.getColCnt(),o=[],s=z(t),r=z(e),a=R(s),l=R(r)-1,u=0;n>u;u++){var c=u*i,h=c+i-1,d=Math.max(a,c),p=Math.min(l,h);if(p>=d){var f=_(d),m=_(p),g=[f.col,m.col].sort(),v=P(d)==s,y=P(p)+1==r;o.push({row:u,leftCol:g[0],rightCol:g[1],isStart:v,isEnd:y})}}return o}var O=this;O.element=n,O.calendar=i,O.name=o,O.opt=s,O.trigger=r,O.isEventDraggable=a,O.isEventResizable=u,O.setEventData=h,O.clearEventData=p,O.eventEnd=m,O.reportEventElement=g,O.triggerEventDestroy=v,O.eventElementHandlers=y,O.showEvents=b,O.hideEvents=w,O.eventDrop=C,O.eventResize=T;var F=O.defaultEventEnd,W=i.normalizeEvent,B=i.reportEventChange,q={},Q={},X=[],$=i.options;O.isHiddenDay=k,O.skipHiddenDays=H,O.getCellsPerWeek=D,O.dateToCell=M,O.dateToDayOffset=z,O.dayOffsetToCellOffset=R,O.cellOffsetToCell=_,O.cellToDate=I,O.cellToCellOffset=L,O.cellOffsetToDayOffset=P,O.dayOffsetToDate=A,O.rangeToSegments=N;var U,V=s("hiddenDays")||[],G=[],K=[],Z=[],J=s("isRTL");!function(){s("weekends")===!1&&V.push(0,6);for(var e=0,n=0;7>e;e++)K[e]=n,G[e]=-1!=t.inArray(e,V),G[e]||(Z[n]=e,n++);if(U=n,!U)throw"invalid hiddenDays"}()}function de(){function e(t,e){var n=i(t,!1,!0);fe(n,function(t,e){A(t.event,e)}),b(n,e),fe(n,function(t,e){H("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var o=i([t],!0,!1),s=[];return fe(o,function(t,i){t.row===e&&i.css("top",n),s.push(i[0])}),s}function i(e,n,i){var s,l,u=V(),d=n?t("<div/>"):u,p=o(e);return r(p),s=a(p),d[0].innerHTML=s,l=d.children(),n&&u.append(l),c(p,l),fe(p,function(t,e){t.hsides=D(e,!0)}),fe(p,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),fe(p,function(t,e){t.outerHeight=e.outerHeight(!0)}),h(p,i),p}function o(t){for(var e=[],n=0;n<t.length;n++){var i=s(t[n]);e.push.apply(e,i)}return e}function s(t){for(var e=t.start,n=C(t),i=ee(e,n),o=0;o<i.length;o++)i[o].event=t;return i}function r(t){for(var e=k("isRTL"),n=0;n<t.length;n++){var i=t[n],o=(e?i.isEnd:i.isStart)?$:Y,s=(e?i.isStart:i.isEnd)?U:X,r=o(i.leftCol),a=s(i.rightCol);i.left=r,i.outerWidth=a-r}}function a(t){for(var e="",n=0;n<t.length;n++)e+=u(t[n]);return e}function u(t){var e="",n=k("isRTL"),i=t.event,o=i.url,s=["fc-event","fc-event-hori"];I(i)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-event-start"),t.isEnd&&s.push("fc-event-end"),s=s.concat(i.className),i.source&&(s=s.concat(i.source.className||[]));var r=q(i,k);return e+=o?"<a href='"+F(o)+"'":"<div",e+=" class='"+s.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+r+"'><div class='fc-event-inner'>",!i.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+F(G(i.start,i.end,k("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+F(i.title||"")+"</span></div>",t.isEnd&&L(i)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+="</"+(o?"a":"div")+">"}function c(e,n){for(var i=0;i<e.length;i++){var o=e[i],s=o.event,r=n.eq(i),a=H("eventRender",s,s,r);a===!1?r.remove():(a&&a!==!0&&(a=t(a).css({position:"absolute",left:o.left}),r.replaceWith(a),r=a),o.element=r)}}function h(t,e){var n=p(t),i=y(),o=[];if(e)for(var s=0;s<i.length;s++)i[s].height(n[s]);for(var s=0;s<i.length;s++)o.push(i[s].position().top);fe(t,function(t,e){e.css("top",o[t.row]+t.top)})}function p(t){for(var e=j(),n=B(),i=[],o=m(t),s=0;e>s;s++){for(var r=o[s],a=[],l=0;n>l;l++)a.push(0);for(var u=0;u<r.length;u++){var c=r[u];c.top=N(a.slice(c.leftCol,c.rightCol+1));for(var l=c.leftCol;l<=c.rightCol;l++)a[l]=c.top+c.outerHeight}i.push(N(a))}return i}function m(t){var e,n,i,o=j(),s=[];for(e=0;e<t.length;e++)n=t[e],i=n.row,n.element&&(s[i]?s[i].push(n):s[i]=[n]);for(i=0;o>i;i++)s[i]=g(s[i]||[]);return s}function g(t){for(var e=[],n=v(t),i=0;i<n.length;i++)e.push.apply(e,n[i]);return e}function v(t){t.sort(me);for(var e=[],n=0;n<t.length;n++){for(var i=t[n],o=0;o<e.length&&pe(i,e[o]);o++);e[o]?e[o].push(i):e[o]=[i]}return e}function y(){var t,e=j(),n=[];for(t=0;e>t;t++)n[t]=Q(t).find("div.fc-day-content > div");return n}function b(t,e){var n=V();fe(t,function(t,n,i){var o=t.event;o._id===e?w(o,n,t):n[0]._fci=i}),S(n,t,w)}function w(t,e,n){I(t)&&E.draggableDayEvent(t,e,n),n.isEnd&&L(t)&&E.resizableDayEvent(t,e,n),M(t,e)}function x(t,e){var n,i=te();e.draggable({delay:50,opacity:k("dragOpacity"),revertDuration:k("dragRevertDuration"),start:function(o,s){H("eventDragStart",e,t,o,s),R(t,e),i.start(function(i,o,s,r){if(e.draggable("option","revert",!i||!s&&!r),Z(),i){var a=ne(o),u=ne(i);n=f(u,a),K(l(d(t.start),n),l(C(t),n))}else n=0},o,"drag")},stop:function(o,s){i.stop(),Z(),H("eventDragStop",e,t,o,s),n?_(this,t,n,0,t.allDay,o,s):(e.css("filter",""),z(t,e))}})}function T(e,i,o){var s=k("isRTL"),r=s?"w":"e",a=i.find(".ui-resizable-"+r),u=!1;W(i),i.mousedown(function(t){t.preventDefault()}).click(function(t){u&&(t.preventDefault(),t.stopImmediatePropagation())}),a.mousedown(function(s){function a(n){H("eventResizeStop",this,e,n),t("body").css("cursor",""),d.stop(),Z(),c&&O(this,e,c,0,n),setTimeout(function(){u=!1},0)}if(1==s.which){u=!0;var c,h,d=te(),p=(j(),B(),i.css("top")),f=t.extend({},e),m=re(se(e.start));J(),t("body").css("cursor",r+"-resize").one("mouseup",a),H("eventResizeStart",this,e,s),d.start(function(i,s){if(i){var a=ie(s),u=ie(i);if(u=Math.max(u,m),c=oe(u)-oe(a)){f.end=l(P(e),c,!0);var d=h;h=n(f,o.row,p),h=t(h),h.find("*").css("cursor",r+"-resize"),d&&d.remove(),R(e)}else h&&(z(e),h.remove(),h=null);Z(),K(e.start,l(C(e),c))}},s)}})}var E=this;E.renderDayEvents=e,E.draggableDayEvent=x,E.resizableDayEvent=T;var k=E.opt,H=E.trigger,I=E.isEventDraggable,L=E.isEventResizable,P=E.eventEnd,A=E.reportEventElement,M=E.eventElementHandlers,z=E.showEvents,R=E.hideEvents,_=E.eventDrop,O=E.eventResize,j=E.getRowCnt,B=E.getColCnt,Q=(E.getColWidth,E.allDayRow),Y=E.colLeft,X=E.colRight,$=E.colContentLeft,U=E.colContentRight,V=(E.dateToCell,E.getDaySegmentContainer),G=E.calendar.formatDates,K=E.renderDayOverlay,Z=E.clearOverlays,J=E.clearSelection,te=E.getHoverListener,ee=E.rangeToSegments,ne=E.cellToDate,ie=E.cellToCellOffset,oe=E.cellOffsetToDayOffset,se=E.dateToDayOffset,re=E.dayOffsetToCellOffset}function pe(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(i.leftCol<=t.rightCol&&i.rightCol>=t.leftCol)return!0}return!1}function fe(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=i.element;o&&e(i,o,n)}}function me(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function ge(){function e(t,e,o){n(),e||(e=l(t,o)),u(t,e,o),i(t,e,o)}function n(t){h&&(h=!1,c(),a("unselect",null,t))}function i(t,e,n,i){h=!0,a("select",null,t,e,n,i)}function o(e){var o=s.cellToDate,a=s.getIsCellAllDay,l=s.getHoverListener(),h=s.reportDayClick;if(1==e.which&&r("selectable")){n(e);var d;l.start(function(t,e){c(),t&&a(t)?(d=[o(e),o(t)].sort(_),u(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&h(d[0],!0,t),i(d[0],d[1],!0,t))})}}var s=this;s.select=e,s.unselect=n,s.reportSelection=i,s.daySelectionMousedown=o;var r=s.opt,a=s.trigger,l=s.defaultSelectionEnd,u=s.renderSelection,c=s.clearSelection,h=!1;r("selectable")&&r("unselectAuto")&&t(document).mousedown(function(e){var i=r("unselectCancel");i&&t(e.target).parents(i).length||n(e)})}function ve(){function e(e,n){var i=s.shift();return i||(i=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),i[0].parentNode!=n[0]&&i.appendTo(n),o.push(i.css(e).show()),i}function n(){for(var t;t=o.shift();)s.push(t.hide().unbind())}var i=this;i.renderOverlay=e,i.clearOverlays=n;var o=[],s=[]}function ye(t){var e,n,i=this;i.build=function(){e=[],n=[],t(e,n)},i.cell=function(t,i){var o,s=e.length,r=n.length,a=-1,l=-1;for(o=0;s>o;o++)if(i>=e[o][0]&&i<e[o][1]){a=o;break}for(o=0;r>o;o++)if(t>=n[o][0]&&t<n[o][1]){l=o;break}return a>=0&&l>=0?{row:a,col:l}:null},i.rect=function(t,i,o,s,r){var a=r.offset();return{top:e[t][0]-a.top,left:n[i][0]-a.left,width:n[s][1]-n[i][0],height:e[o][1]-e[t][0]}}}function be(e){function n(t){we(t);var n=e.cell(t.pageX,t.pageY);(!n!=!r||n&&(n.row!=r.row||n.col!=r.col))&&(n?(s||(s=n),o(n,s,n.row-s.row,n.col-s.col)):o(n,s),r=n)}var i,o,s,r,a=this;a.start=function(a,l,u){o=a,s=r=null,e.build(),n(l),i=u||"mousemove",t(document).bind(i,n)},a.stop=function(){return t(document).unbind(i,n),r}}function we(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function xe(t){function n(e){return o[e]=o[e]||t(e)}var i=this,o={},s={},r={};i.left=function(t){return s[t]=s[t]===e?n(t).position().left:s[t]},i.right=function(t){return r[t]=r[t]===e?i.left(t)+n(t).width():r[t]},i.clear=function(){o={},s={},r={}}}var Ce={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Te={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Se=t.fullCalendar={version:"1.6.4"},Ee=Se.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var o,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=t.data(this,"fullCalendar");if(i&&t.isFunction(i[n])){var r=i[n].apply(i,s);o===e&&(o=r),"destroy"==n&&t.removeData(this,"fullCalendar")}}),o!==e?o:this}n=n||{};var r=n.eventSources||[];return delete n.eventSources,n.events&&(r.push(n.events),delete n.events),n=t.extend(!0,{},Ce,n.isRTL||n.isRTL===e&&Ce.isRTL?Te:{},n),this.each(function(e,o){var s=t(o),a=new i(s,n,r);s.data("fullCalendar",a),a.render()}),this},Se.sourceNormalizers=[],Se.sourceFetchers=[];var ke={dataType:"json",cache:!1},De=1;Se.addDays=l,Se.cloneDate=d,Se.parseDate=g,Se.parseISO8601=v,Se.parseTime=y,Se.formatDate=b,Se.formatDates=w;var He=["sun","mon","tue","wed","thu","fri","sat"],Ie=864e5,Le=36e5,Pe=6e4,Ae={s:function(t){return t.getSeconds()},ss:function(t){return O(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return O(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return O(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return O(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return O(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return O(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return b(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return x(t)}};Se.dateFormatters=Ae,Se.applyAll=Q,Ee.month=X,Ee.basicWeek=$,Ee.basicDay=U,n({weekMode:"fixed"}),Ee.agendaWeek=K,Ee.agendaDay=Z,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);